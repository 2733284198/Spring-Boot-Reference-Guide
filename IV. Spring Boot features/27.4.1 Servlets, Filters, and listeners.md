### 27.4.1 Servlets、Filters和listeners

使用内嵌servlet容器时，你可以通过使用Spring beans或扫描Servlet组件的方式注册servlets，filters及特定Servlet相关的所有listeners（比如`HttpSessionListener`）。

**将Servlets，Filters和listeners注册为Spring beans**

所有`Servlet`，`Filter`或servlet `*Listener`实例，只要是Spring bean，都会注册到内嵌容器中。如果想在配置期间引用`application.properties`的属性，这是非常方便的。默认情况下，如果上下文只包含单个Servlet，那它将被映射到`/`。如果存在多个servlet beans，那么bean的名称将被用作路径的前缀，过滤器将映射到`/*`。
    
如果基于约定（convention-based）的映射不够灵活，你可以使用`ServletRegistrationBean`，`FilterRegistrationBean`，`ServletListenerRegistrationBean`实现完全的控制。

Spring Boot ships with many auto-configurations that may define Filter beans. Here are a few examples of Filters and their respective order (lower order value means higher precedence):

| Servlet Filter  |  Order  |
|----------|-------------|
| `OrderedCharacterEncodingFilter` |  `Ordered.HIGHEST_PRECEDENCE` |
| `WebMvcMetricsFilter` |    `Ordered.HIGHEST_PRECEDENCE + 1`   |
| `ErrorPageFilter` | `Ordered.HIGHEST_PRECEDENCE + 1` |
| `HttpTraceFilter` | `Ordered.LOWEST_PRECEDENCE - 10` |

It is usually safe to leave Filter beans unordered.

If a specific order is required, you should avoid configuring a Filter that reads the request body at `Ordered.HIGHEST_PRECEDENCE`, since it might go against the character encoding configuration of your application. If a Servlet filter wraps the request, it should be configured with an order that is less than or equal to `FilterRegistrationBean.REQUEST_WRAPPER_FILTER_MAX_ORDER`.
